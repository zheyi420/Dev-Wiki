> You shall only run applications on your computer that you trust. This page shows several methods to check that the software called _Gpg4win_ that you have just downloaded originates from the Gpg4win Initiative.
> 
> **Using one method is good enough.**

# 1. Code Signing Certificate

All Gpg4win installer files since April 2016 are code signed. The signature informations used to code sign the packages can be found on the [Gpg4Win package integrity](https://www.gpg4win.org/package-integrity.html) site. Windows can check the integrity and the publisher of a signed software package.

## Method A: UAC (recommended)

When trying to run the installer on Windows, the **User Access Control dialog will show the publisher**, check that it is the one you expected it to be. :) (If you have disabled User Access Control use a different method.)

## Method B: file properties

A second way is to use the file properties in the explorer. Right click on the installer -> properties -> digital signatures -> Details of signatures. (Try this if no publisher is shown by the UAC in rare cases after a download with Firefox or Iridium (Chromium). For details see [T3379](https://dev.gnupg.org/T3379) .)

## Method C: signtool

A third way is to use [MSDN:SignTool](https://msdn.microsoft.com/en-us/library/windows/desktop/aa387764(v=vs.85).aspx) which is a part of the Microsoft development tools: Open open a command line, navigate to the folder and enter
`SignTool verify /pa /v gpg4win*.exe`

# 2. Checksums

[Hash Checksum](../Hash-Checksum.md) 

Once you have downloaded the file, you can verify that it matches the published checksums (that you have gotten via a trusted channel). Open a command line, navigate to your Download-Folder, and use a command like the following, but adapt the filename to the version you have downloaded and you want to check:

`certutil -hashfile gpg4win-3.1.15.exe sha256`

Once you have entered the command, it will return an alphanumeric string, which you can compare to the one on the [Gpg4Win package integrity](https://www.gpg4win.org/package-integrity.html) site. It has to match for all hexadecimal digits. (Sometimes colons or spaces are used to group the checksum.) Make sure to compare it to the checksum with the right algorithm (SHA-256).

## If the tool does not work

... see of you have a different tool that can calculate SHA-256 checksums on your machine and use it instead.

On systems that run older operating systems than Windows 8: Install a certain [Windows Patch](https://support.microsoft.com/en-us/kb/934576?spid=12925&sid=1569), which delivers the functionality.

Less reliable is falling back using `sha1` stead of the `sha256` in the above command line and comparing it to the SHA-1 checksum. Some elder versions of Windows may not come with a standard tool to calculate SHA-256 and we still publish SHA-1 checksums because checking against them is better than not checking with a cryptographic checksum.

# 3. OpenPGP signature

If the file on the download page is accompanied by a file labelled "signature" with the same name as the package and the extension ".asc". These .asc files are OpenPGP signatures. 它们允许你验证你下载的文件正是我们希望你获取的文件。

If you upgrade your [Gpg4Win](https://wiki.gnupg.org/Gpg4Win) version, you already have gnupg installed and you can verify the integrity of the downloaded file, by its [OpenPGP](https://wiki.gnupg.org/OpenPGP) signature. To do so, you have to download, next the file, the signature of the file. You'll find the download-links on the [Gpg4Win package integrity](https://www.gpg4win.org/package-integrity.html) site. The ey, with which the files are signed, is also given on that page. You have to import the public key and now you can validate the signature of the file with the command `gpg --verify gpg4win*.exe.sig gpg4win*.exe`

If the output of the above command is similar to the following, then either you don't have our distribution keys (our [signing keys are here](https://gnupg.org/signature_key.html)) or the signature was generated by someone else and the file should be treated suspiciously.

```powershell
PS D:\Tools\Security\Gpg4win> gpg --verify .\gpg4win-4.0.3.exe.sig .\gpg4win-4.0.3.exe
gpg: Signature made 2022/7/12 19:47:21 �й���׼ʱ��
gpg:                using RSA key 5B80C5754298F0CB55D8ED6ABCEF7E294B092E28
gpg: Can't check signature: No public key
```

import the .asc file from [https://gnupg.org/signature_key.asc](https://gnupg.org/signature_key.asc) (Or check update from [https://gnupg.org/signature_key.html](https://gnupg.org/signature_key.html))

and verify again, If you instead see:

```powershell
D:\Tools\Security\Gpg4win>gpg --verify gpg4win-4.0.3.exe.sig gpg4win-4.0.3.exe
gpg: Signature made 2022/7/12 19:47:21 й׼ʱ
gpg:                using RSA key 5B80C5754298F0CB55D8ED6ABCEF7E294B092E28
gpg: Good signature from "Andre Heinecke (Release Signing Key)" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 5B80 C575 4298 F0CB 55D8  ED6A BCEF 7E29 4B09 2E28
```

**Kleopatra tutorial**

- [利用Gpg4win来打造一个安全的加密文件](https://blog.51cto.com/z00w00/2070169) 

# 4. File lengths (as diagnostics)

This is not a verification method, but I way trying to find out why a method my have failed. One cause of a bad download is that the internet connection broke down during the download. In this case the size of the file on your harddisk is smaller than it should be.

Navigate to the folder, where you downloaded the [Gpg4Win](https://wiki.gnupg.org/Gpg4Win) packages to, and enter

`dir`

The command will list all files and their sizes in the directory. You can then compare those results with the sizes given on the [Gpg4Win package integrity](https://www.gpg4win.org/package-integrity.html) site.

This can help you spot a corrupt file where the downloading got aborted or something. It will not protect you against an attacker.

# References

- [https://support.torproject.org/zh-CN/tbb/#how-to-verify-signature](https://support.torproject.org/zh-CN/tbb/#how-to-verify-signature)
- [https://wiki.gnupg.org/Gpg4win/CheckIntegrity](https://wiki.gnupg.org/Gpg4win/CheckIntegrity)
- [https://gnupg.org/download/integrity_check.html](https://gnupg.org/download/integrity_check.html)
- [https://gnupg.org/signature_key.html](https://gnupg.org/signature_key.html)